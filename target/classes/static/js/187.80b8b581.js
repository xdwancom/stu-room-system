"use strict";(self["webpackChunkvue2"]=self["webpackChunkvue2"]||[]).push([[187],{6187:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var o=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){e.dialogFormVisible=!0,e.form.id=e.stuData.length+1}}},[e._v("添加学生信息")]),t("el-dialog",{attrs:{title:"填写信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form}},[t("el-form-item",{attrs:{label:"楼栋",required:"true","label-width":e.formLabelWidth}},[t("el-input",{attrs:{clearable:"",autocomplete:"off"},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),t("el-form-item",{attrs:{label:"宿舍号",required:"true","label-width":e.formLabelWidth}},[t("el-input",{attrs:{clearable:"",autocomplete:"off"},model:{value:e.form.roomid,callback:function(t){e.$set(e.form,"roomid",t)},expression:"form.roomid"}})],1),t("el-form-item",{attrs:{label:"学号",required:"true","label-width":e.formLabelWidth,prop:"id",rules:[{required:!0,message:"留空则自动生成"},{type:"number",message:"必须为数字"}]}},[t("el-input",{attrs:{clearable:"",autocomplete:"off"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",e._n(t))},expression:"form.id"}})],1),t("el-form-item",{attrs:{label:"姓名",required:"true","label-width":e.formLabelWidth,prop:"name",rules:[{required:!0,message:"不能为空",trigger:"blur"}]}},[t("el-input",{attrs:{clearable:"",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"年龄",required:"true","label-width":e.formLabelWidth,prop:"age",rules:[{required:!0,message:"不能为空"},{type:"number",message:"必须为数字"}]}},[t("el-input",{attrs:{clearable:"",autocomplete:"off"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",e._n(t))},expression:"form.age"}})],1),t("el-form-item",{attrs:{label:"电话",required:"true","label-width":e.formLabelWidth,prop:"phone",rules:[{required:!0,message:"不能为空"}]}},[t("el-input",{attrs:{clearable:"",maxlength:"20","show-word-limit":"",autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t("el-form-item",{attrs:{label:"性别",required:"true","label-width":e.formLabelWidth}},[t("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[t("el-radio-button",{attrs:{label:"男"}}),t("el-radio-button",{attrs:{label:"女"}})],1)],1),t("el-form-item",{attrs:{label:"院系",required:"true","label-width":e.formLabelWidth}},[t("el-radio-group",{model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}},[t("el-radio-button",{attrs:{label:"计算机"}}),t("el-radio-button",{attrs:{label:"土木"}})],1)],1),t("el-form-item",{attrs:{label:"年级",required:"true","label-width":e.formLabelWidth}},[t("el-radio-group",{model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}},[t("el-radio-button",{attrs:{label:"1"}}),t("el-radio-button",{attrs:{label:"2"}}),t("el-radio-button",{attrs:{label:"3"}}),t("el-radio-button",{attrs:{label:"4"}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{round:""},on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")]),t("el-button",{attrs:{round:""},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",round:""},on:{click:e.form_Submit}},[e._v("确定")])],1)],1),e._v("  "),t("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.assign("grade")}}},[e._v("按照年级优先分配宿舍")]),e._v("  "),t("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.assign("dep")}}},[e._v("按照院系优先分配宿舍")]),t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",round:""},on:{click:function(t){return e.quit()}}},[e._v("退出登录")])],1),t("br"),t("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[t("el-form-item",{attrs:{label:"楼栋",prop:"unit"}},[t("el-input",{attrs:{placeholder:"请输入楼栋"},model:{value:e.searchForm.unit,callback:function(t){e.$set(e.searchForm,"unit",t)},expression:"searchForm.unit"}})],1),t("el-form-item",{attrs:{label:"宿舍号",prop:"roomid"}},[t("el-input",{attrs:{placeholder:"请输入宿舍号"},model:{value:e.searchForm.roomid,callback:function(t){e.$set(e.searchForm,"roomid",t)},expression:"searchForm.roomid"}})],1),t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入姓名(支持模糊查询)"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),t("el-form-item",{attrs:{label:"学号",prop:"id"}},[t("el-input",{attrs:{placeholder:"请输入学号"},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"gender"}},[t("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.searchForm.gender,callback:function(t){e.$set(e.searchForm,"gender",t)},expression:"searchForm.gender"}},[t("el-option",{attrs:{label:"男",value:"男"}}),t("el-option",{attrs:{label:"女",value:"女"}})],1)],1),t("el-form-item",{attrs:{label:"院系",prop:"department"}},[t("el-select",{attrs:{placeholder:"请选择院系"},model:{value:e.searchForm.department,callback:function(t){e.$set(e.searchForm,"department",t)},expression:"searchForm.department"}},[t("el-option",{attrs:{label:"计算机",value:"计算机"}}),t("el-option",{attrs:{label:"土木",value:"土木"}})],1)],1),t("el-form-item",{attrs:{label:"年级",prop:"grade"}},[t("el-select",{attrs:{placeholder:"请选择年级"},model:{value:e.searchForm.grade,callback:function(t){e.$set(e.searchForm,"grade",t)},expression:"searchForm.grade"}},[t("el-option",{attrs:{label:"1",value:"1"}}),t("el-option",{attrs:{label:"2",value:"2"}}),t("el-option",{attrs:{label:"3",value:"3"}}),t("el-option",{attrs:{label:"4",value:"4"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search_Submit()}}},[e._v("根据筛选条件查询")]),t("el-button",{on:{click:function(t){e.resetForm("searchForm"),e.search_Submit()}}},[e._v("重置")])],1)],1),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.delete_choose()}}},[e._v("批量删除已勾选信息")]),t("el-button",{on:{click:function(t){return e.cancel_choose()}}},[e._v("取消")]),t("br"),t("br"),t("div",[t("el-table",{ref:"multiple_Table",staticStyle:{width:"100%"},attrs:{data:e.stuData,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"40"}}),t("el-table-column",{attrs:{prop:"roommsg",label:"楼栋-宿舍号",sortable:"",width:"130"}}),t("el-table-column",{attrs:{prop:"id",label:"学号",sortable:"",width:"80"}}),t("el-table-column",{attrs:{prop:"name",label:"姓名",width:"100"}}),t("el-table-column",{attrs:{prop:"gender",label:"性别",sortable:"",width:"80"}}),t("el-table-column",{attrs:{prop:"age",label:"年龄",sortable:"",width:"80"}}),t("el-table-column",{attrs:{prop:"department",label:"院系",sortable:"",width:"100"}}),t("el-table-column",{attrs:{prop:"grade",label:"年级",sortable:"",width:"80"}}),t("el-table-column",{attrs:{prop:"phone",label:"电话",width:"180"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.EditFormVisible=!0,e.editform.unit=r.row.unit,e.editform.id=r.row.id,e.editform.roomid=r.row.roomid,e.editform.age=r.row.age,e.editform.name=r.row.name,e.editform.phone=r.row.phone,e.editform.gender=r.row.gender,e.editform.grade=r.row.grade,e.editform.department=r.row.department}}},[e._v("编辑")]),t("el-dialog",{attrs:{title:"填写信息",visible:e.EditFormVisible},on:{"update:visible":function(t){e.EditFormVisible=t}}},[t("el-form",{ref:"editform",attrs:{model:e.editform}},[t("el-form-item",{attrs:{label:"楼栋",required:"true","label-width":e.formLabelWidth}},[t("el-input",{attrs:{clearable:"",autocomplete:"off"},model:{value:e.editform.unit,callback:function(t){e.$set(e.editform,"unit",t)},expression:"editform.unit"}})],1),t("el-form-item",{attrs:{label:"宿舍号",required:"true","label-width":e.formLabelWidth}},[t("el-input",{attrs:{clearable:"",autocomplete:"off"},model:{value:e.editform.roomid,callback:function(t){e.$set(e.editform,"roomid",t)},expression:"editform.roomid"}})],1),t("el-form-item",{attrs:{label:"学号",required:"true","label-width":e.formLabelWidth,prop:"id",rules:[{required:!0,message:"留空则自动生成"},{type:"number",message:"必须为数字"}]}},[t("el-input",{attrs:{clearable:"",autocomplete:"off",disabled:!0},model:{value:e.editform.id,callback:function(t){e.$set(e.editform,"id",e._n(t))},expression:"editform.id"}})],1),t("el-form-item",{attrs:{label:"姓名",required:"true","label-width":e.formLabelWidth,prop:"name",rules:[{required:!0,message:"不能为空",trigger:"blur"}]}},[t("el-input",{attrs:{clearable:"",autocomplete:"off"},model:{value:e.editform.name,callback:function(t){e.$set(e.editform,"name",t)},expression:"editform.name"}})],1),t("el-form-item",{attrs:{label:"年龄",required:"true","label-width":e.formLabelWidth,prop:"age",rules:[{required:!0,message:"不能为空"},{type:"number",message:"必须为数字"}]}},[t("el-input",{attrs:{clearable:"",autocomplete:"off"},model:{value:e.editform.age,callback:function(t){e.$set(e.editform,"age",e._n(t))},expression:"editform.age"}})],1),t("el-form-item",{attrs:{label:"电话",required:"true","label-width":e.formLabelWidth,prop:"phone",rules:[{required:!0,message:"不能为空"}]}},[t("el-input",{attrs:{clearable:"",maxlength:"20","show-word-limit":"",autocomplete:"off"},model:{value:e.editform.phone,callback:function(t){e.$set(e.editform,"phone",t)},expression:"editform.phone"}})],1),t("el-form-item",{attrs:{label:"性别",required:"true","label-width":e.formLabelWidth}},[t("el-radio-group",{model:{value:e.editform.gender,callback:function(t){e.$set(e.editform,"gender",t)},expression:"editform.gender"}},[t("el-radio-button",{attrs:{label:"男"}}),t("el-radio-button",{attrs:{label:"女"}})],1)],1),t("el-form-item",{attrs:{label:"院系",required:"true","label-width":e.formLabelWidth}},[t("el-radio-group",{model:{value:e.editform.department,callback:function(t){e.$set(e.editform,"department",t)},expression:"editform.department"}},[t("el-radio-button",{attrs:{label:"计算机"}}),t("el-radio-button",{attrs:{label:"土木"}})],1)],1),t("el-form-item",{attrs:{label:"年级",required:"true","label-width":e.formLabelWidth}},[t("el-radio-group",{model:{value:e.editform.grade,callback:function(t){e.$set(e.editform,"grade",t)},expression:"editform.grade"}},[t("el-radio-button",{attrs:{label:"1"}}),t("el-radio-button",{attrs:{label:"2"}}),t("el-radio-button",{attrs:{label:"3"}}),t("el-radio-button",{attrs:{label:"4"}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{round:""},on:{click:function(t){return e.resetForm("editform")}}},[e._v("重置")]),t("el-button",{attrs:{round:""},on:{click:function(t){e.EditFormVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.edit_Submit()}}},[e._v("确定")])],1)],1),e._v("   "),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.delete_ids(r.row.id)}}},[e._v("删除")])]}}])})],1)],1)],1)},a=[],l=(r(7658),r(9555)),i={data(){return{stuData:[],tempData:[],chooseData:[],form:{unit:"",roomid:"",id:"",name:"",gender:"男",age:"",department:"计算机",grade:"1",phone:"",roommsg:""},editform:{unit:"",roomid:"",id:"",name:"",gender:"男",age:"",department:"计算机",grade:"1",phone:"",roommsg:""},searchForm:{unit:"",roomid:"",name:"",gender:"",department:"",grade:"",roommsg:""},dialogFormVisible:!1,EditFormVisible:!1,formLabelWidth:"120px"}},methods:{handleOpen(e,t){console.log(e,t)},handleClose(e,t){console.log(e,t)},form_Submit(){""==this.form.name||""==this.form.gender||""==this.form.age||""==this.form.department||""==this.form.grade||""==this.form.phone||null==this.form.name||null==this.form.gender||null==this.form.age||null==this.form.department||null==this.form.grade||null==this.form.phone?this.$message.error("提交失败！个人信息不可留空！"):(""==this.form.unit||"null"==this.form.unit)^(""==this.form.roomid||"null"==this.form.roomid)?this.$message.error("提交失败！楼栋和宿舍不可二填一！"):l.Z.post("/stu",this.form).then((e=>{"countmax"==e.data.msg?this.$message.error("提交失败！该宿舍已满人！请更换宿舍！"):"id_repeat"==e.data.msg?this.$message.error("提交失败！该学号已存在！请更换学号！"):(this.$message({message:"提交成功！请刷新网页查看最新数据",type:"success"}),console.log(e.data))})).catch((e=>{this.$message.error("提交失败！该宿舍不存在！请更换宿舍！"),console.error(e)}))},search_Submit(){l.Z.post("/stu/search",this.searchForm).then((e=>{console.log(e.data.data),this.stuData=e.data.data,this.$message({message:"查询成功！共"+e.data.data.length+"条数据",type:"success"})})).catch((e=>{console.error(e)}))},edit_Submit(){""==this.editform.name||""==this.editform.gender||""==this.editform.age||""==this.editform.department||""==this.editform.grade||""==this.editform.phone||null==this.editform.name||null==this.editform.gender||null==this.editform.age||null==this.editform.department||null==this.editform.grade||null==this.editform.phone?this.$message.error("提交失败！信息不可留空！"):(""==this.editform.unit||"null"==this.editform.unit)^(""==this.editform.roomid||"null"==this.editform.roomid)?this.$message.error("提交失败！楼栋和宿舍不可二填一！"):l.Z.post("/stu/update",this.editform).then((e=>{"count max"==e.data.msg?this.$message.error("提交失败！该宿舍已满人！请更换宿舍！"):(this.$message({message:"提交成功！请刷新网页查看最新数据",type:"success"}),console.log(e.data))})).catch((e=>{this.$message.error("提交失败！该宿舍不存在！请更换宿舍！"),console.error(e)}))},delete_ids(e){this.$confirm("此操作将永久删除指定学生所有信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{l.Z.delete("/stu/ids/"+e).then((e=>{console.log(e.data),this.$message({type:"success",message:"删除成功!请刷新网页查看最新数据"})})).catch((e=>{console.error(e)}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},assign(e){this.$confirm("此操作将按照指定年级/院系升序,宿舍楼号升序自动分配宿舍\r\n是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{l.Z.get("/stu/assign/"+e).then((e=>{console.log(e.data),this.$message({message:"自动分配宿舍成功！请刷新界面查看最新数据",type:"success"})})).catch((e=>{console.error(e)}))})).catch((()=>{this.$message({type:"info",message:"已取消分配"})}))},resetForm(e){this.$refs[e].resetFields()},delete_choose(){for(var e=new Array,t=0;t<this.chooseData.length;t++)e[t]=this.chooseData[t].id;this.delete_ids(e)},cancel_choose(e){e?e.forEach((e=>{this.$refs.multiple_Table.toggleRowSelection(e)})):this.$refs.multiple_Table.clearSelection()},handleSelectionChange(e){this.chooseData=e},quit(){localStorage.clear(),this.$router.push("/login"),this.$message.success("已退出登录")}},mounted(){l.Z.post("/stu/search",this.searchForm).then((e=>{console.log(e.data.msg),"NOT_LOGIN"==e.data.msg?(this.$router.push("/login"),this.$message.error("登录信息过期，请重新登录")):(console.log(e.data.data),this.stuData=e.data.data)})).catch((e=>{console.error(e)}))}},s=i,n=r(1001),m=(0,n.Z)(s,o,a,!1,null,null,null),d=m.exports}}]);
//# sourceMappingURL=187.80b8b581.js.map